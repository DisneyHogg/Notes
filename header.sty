
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Packages

\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{braket} %Bras, kets, sets, caps or not. 
\usepackage{hyperref} %References and links. 
\usepackage{bm} %Bold vectors. 
\usepackage{faktor} %Write quotients nicely.
\usepackage{xfrac} %Slanted fractions with \sfrac
\usepackage{slashed} %Dirac slash notation
\usepackage{mathtools} %Contraction notation \overbracket. 
\usepackage{xcolor} % \highlight to color math input.
\usepackage{tensor} %Raised and lowered indices with \indices.
\usepackage{color}
\usepackage{listings}
\usepackage{soul} %Highlight text with \hl{}
%\usepackage{xurl} %Put URLs in text that split lines \url{}
\usepackage[colorinlistoftodos]{todonotes}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Definitions

%Environments
\newtheorem{theorem}{Theorem}[subsection]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{remark}{Remark}
\newtheorem{definition}{Definition}[subsection]
\newtheorem{fact}{Fact}[subsection]
\newtheorem*{idea}{Idea}
\newtheorem{example}{Example}[subsection]
\newtheorem{prop}{Proposition}[subsection]
\newtheorem{ex}{Exercise}[subsection]
\newtheorem*{aside}{Aside}
\newtheorem{conjecture}{Conjecture}[subsection]

%Text math operators.
\DeclareMathOperator{\spn}{Span}
\DeclareMathOperator{\tr}{Tr}
\DeclareMathOperator{\SU}{SU}
%\DeclareMathOperator{\dim}{dim}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Pfaff}{Pfaff}
\DeclareMathOperator{\image}{Im}
\DeclareMathOperator{\vol}{Vol}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Harm}{Harm}
\DeclareMathOperator{\ind}{index}
\DeclareMathOperator{\cohom}{Cohom}

%Symbolic shortcuts 
\newcommand{\eps}{\epsilon}
\newcommand{\curl}{\bm{\nabla}\times}
\newcommand{\divergence}{\bm{\nabla}\cdot}
\newcommand{\grad}{\bm{\nabla}}
\newcommand{\del}{\partial}
\newcommand{\tmeas}{\frac{d^3\bm{p}}{(2\pi)^3}}
%Momentum measure in 3 dimensions 
\newcommand{\fmeas}{\frac{d^4p}{(2\pi)^4}} %Momentum measure in 4 dimensions
\newcommand{\LImeas}{\frac{d^3\bm{p}}{(2\pi)^32E_{\bm{p}}}}
%Normalised LI measure.
\newcommand{\cst}{\alpha^\prime} % String constant.
\newcommand{\msolar}{M_\odot}

%Text type shortcuts
\newcommand{\bam}[1]{\textbf{#1}}
\newcommand{\mf}[1]{\mathfrak{#1}}
\newcommand{\mbb}[1]{\mathbb{#1}}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\highlight}[1]{%
  \colorbox{red!50}{$\displaystyle#1$}}
\newcommand{\secmath}[1]{\texorpdfstring{$ #1 $}{T}}
\newcommand{\pround}[1]{\left( #1 \right)}
\newcommand{\psquare}[1]{\left[ #1 \right]}
\newcommand{\pbrace}[1]{\left\{ #1 \right\} }
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert} %absolute value. 

%Functions shortcuts.
\newcommand{\comm}[2][]{\left[ #1, #2 \right]} %Commutator .
\newcommand{\acomm}[2][]{\left\{ #1, #2 \right\}} %Anticommutator .
\newcommand{\pd}[2][]{\frac{\partial#1}{\partial#2}} %Partial derivative. 
\newcommand{\pds}[2][]{\frac{\partial^2 #1}{\partial #2^2}} %Second partial derivative.

\newcommand{\pb}[2][]{\left\{ #1, #2 \right\}_{PB}} %Poisson bracket, different from acomm
\newcommand{\upwick}[1]{\overbracket[0.5pt]{#1}} % Bracket for a Wick contraction
\newcommand{\downwick}[1]{\underbracket[0.5pt]{#1}} % Bracket for a Wick contraction 



\newcommand{\be}{\begin{equation}}  
\newcommand{\ee}{\end{equation}}
%Used like \[ \] but with tags.

\newcommand{\eq}[1]{\begin{align*}#1\end{align*}}
%Used to short align env. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Misc
\numberwithin{equation}{subsection}

\definecolor{mygray}{rgb}{0.4,0.4,0.4}

\lstset{basicstyle=\ttfamily\color{mygray}, commentstyle=\color{blue}, keywordstyle=\color{black}, language=Matlab }

\newenvironment{claim}[1]{\par\noindent\underline{Claim:}\space#1}{}
\newenvironment{claimproof}[1]{\par\noindent\underline{Proof:}\space#1}{\hfill $\blacksquare$}